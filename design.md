# Планирование эксперимента

## Оглавление
- [Цель эксперимента](#цель-эксперимента)
- [Подбор факторов](#подбор-факторов)
- [Используемые датчики](#используемые-датчики)
- [Выбор количества экспериментов и опытов](#выбор-количества-экспериментов-и-опытов)
- [Методы математической обработки](#методы-математической-обработки)
- [Экспериментальная установка](#экспериментальная-установка)
- [Ход эксперимента](#ход-эксперимента)

## Цель эксперимента

**Тема:** влияние значения горизонта планирования локального планировщика на навигацию наземного мобильного робота

**Цель:** определить степень влияния значения горизонта планирования локального планировщика на навигацию наземного мобильного робота

**Научная гипотеза:** изменение значения горизонта планирования в среде с определенной шириной препятствия влияет на время навигации робота

**Выполнение критериев научной гипотезы:**
- Проверямость: исследователи могут проверить гипотезу в тех же условиях эксперимента: виртуальном окружении, модели робота, карте, траекториях и алгоритмах
- Экономичность: гипотеза ставит точный вопрос о влиянии горизонта планирования на время навигации робота
- Применимость: знание того, как влияет горизонт планирования на время навигации в конкретном среде позволяет оптимизировать задачу навигации.
- Расширяемость: можно добавить новые факторы, например длину препятствия, высоту; можно изменить отклик на пройденное расстояние.
- Консервативность: задача рассматривается в рамках задачи управления (навигации)

> На основании вида гипотезы можно сделать вывод об отнесении эксперимента к типу **констатирующих**, поскольку исследование представляет собой проверку утверждения

## Подбор факторов

Факторы эксперимента составляют параметры навигации: параметры локализации робота, кинематические и динамические параметры робота, параметры глобального и локального планировщиков, параметры среды.

Входными факторами являются:
- значение горизонта планирования
- ширина препятствия

Управляющими факторами являются:
- кинематика и динамика модели робота
- параметры локального, глобального планировщика
- параметры среды
- параметры локализации

Случайными факторами являются:
- Real-time factor (RTF)
- частота публикации данных в топики
- ошибка дальномера

Отклик системы: время навигации робота

Уровни входных факторов:
- Горизонт планирования: [1.0, 2.0, 3.0, 4.0, 5.0]
- Ширина препятствия: [0.1, 0.2, 0.3, 0.4, 0.5]

## Используемые датчики

Для работы алгоритма используется модель двумерного лазерного дальномера в симуляторе Gazebo Harmonic.

## Выбор количества экспериментов и опытов

Количество опытов вычисляется на основании ошибки датчика и коэффициента Кохрена. Изначально количество опытов равняется 10.

Количество экспериментов вычисляется на базе полного факторного эксперимента. Для 2-х факторов с 5-ю уровнями количество экспериментов равно 25.

## Методы математической обработки

- Метод нормализации данных: MinMax
- Очистка данных: NaN, inf, nav_time ~= 0
- Анализ данных:
    - Корреляционный анализ: 
        - Вычисление коэффициента Пирсона (имеет ли смысл, если мы в общем случае говорим о нелинейной зависимости)
        - Вычисление коэффициента Кендалла
    - Регрессионный анализ: 
        - вычисление коэффициента Кохрена
        - вычисление коэффициентов регрессии
        - проверка значимости коэффициентов
        - проверка адекватности всей модели
    - Расчет математического ожидания и стандартного отклонения отклика

## Экспериментальная установка

Для получения информации о системе в GNU/Linux достаточно ввести команду *lscpu*:
```bash
lscpu
```
Узнать размер RAM/Swap:
```bash
free -h
```
Таблица аппаратных и программных характеристик машины, на которой будут проводится эксперименты:
| Hardware |                              | Software         |          |
|----------|-------------------------------------|------------------|-----------------|
| CPU      | AMD Ryzen 5 4600H, 3000 МГц, 6 x 12 | OS               | Ubuntu 24.04.3  |
| GPU      | NVIDIA GeForce GTX 1650             | ROS Distribution | Jazzy Jalisco   |
| RAM      | 16 Gb                               | Simulator        | Gazebo Harmonic |

## Ход эксперимента

Перед началом эксперимента экспериментатор задает начальную и конечную позиции робота, входные и управляющие факторы. В ходе одного эксперимента входные и управляющие факторы не изменяются. Отдельный скрипт выполняет запуск навигации робота.

Ход эксперимента включает следующую последовательность действий:
- Запуск Газебо
- Включение навигации робота
- В цикле
    - Изменение значения горизонта планирования
    - Перезапуск навигации
    - Спавн робота
    - Перемещение робота
    - Удаление препятствия
    - Спавн препятствия
    - Локализация робота
    - Запуск навигации к цели
    - Запись времени начала навигации
    - Навигация робота
        - Сохранение пройденного пути (записываем точки, в которых находится робот во времени)
    - Запись времени окончания навигации, вычисление времени навигации
    - Сохранение результатов
